"use strict";(self.webpackChunkamis_ui_editor=self.webpackChunkamis_ui_editor||[]).push([[3846],{53846:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var n=r(87462),o=r(67294),a=r(70798),i=r(42063),c=r(26709),l=r(5513),s=function(){return o.createElement(i.TXS,{links:o.createElement(l.rU,{to:"/",className:"list-group-item"},o.createElement("i",{className:"fa fa-chevron-right text-muted"}),o.createElement("i",{className:"fa fa-fw fa-mail-forward m-r-xs"}),"去首页"),footerText:""})},p=r(63366),u=r(94578),f=r(67090),d=r(80129),m=r.n(d),y=["router","match","location","history","store","schema","jumpTo","updateLocation","embedMode"],h=function(e,t,r){var l;void 0===r&&(r="page");var s=(l=function(t){function a(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).env=void 0,e}(0,u.Z)(a,t);var c=a.prototype;return c.getEnv=function(){var e=this;if(this.env)return this.env;var t=this.props,o=t.store,a=(0,f.dU)(o),c=function(t,r){if(/^\/api\//.test(t))return t;t=t||"";var n=e.props.history.location,o=m().parse(n.search.substring(1));(t=(0,i.hXT)(t.replace(/\$\$/g,m().stringify(o)),o))&&"#"===t[0]?t=n.pathname+n.search+t:t&&"?"===t[0]&&(t=n.pathname+t);var a=t.indexOf("?"),c=t.indexOf("#"),l=~a?t.substring(0,a):~c?t.substring(0,c):t,s=~a?t.substring(a,~c?c:void 0):"",p=~c?t.substring(c):r?n.hash:"";if(l){if("/"!=l[0]&&!/^\w+\:/.test(l)){var u,f=n.pathname.split("/");for(f.pop();u=/^\.\.?\//.exec(l);)"../"===u[0]&&f.pop(),l=l.substring(u[0].length);l=f.concat(l).join("/")}}else l=n.pathname;return l+s+p},l=function(t){var r=e.props.history,n=c(t),o=r.location,a=n,i="",l=n.indexOf("?");if(~l&&(a=n.substring(0,l),i=n.substring(l)),i){if(a!==o.pathname||!o.search)return!1;var s=m().parse(o.search.substring(1)),p=m().parse(i.substring(1));return Object.keys(p).every((function(e){return p[e]===s[e]}))}return a===o.pathname};return this.env=(0,n.Z)({},a,{session:r,isCurrentUrl:l,updateLocation:t.updateLocation||function(t,r){var n=e.props.history;return"goBack"===t?n.goBack():/^https?\:\/\//.test(t)?window.location.href=t:void n[r?"replace":"push"](c(t,r))},jumpTo:t.jumpTo||function(t,r){var n=e.props.history;if("goBack"===t)return n.goBack();t=c(t),l(t)||(r&&"url"===r.actionType?!1===r.blank?window.location.href=t:window.open(t,"_blank"):r&&r.blank?window.open(t,"_blank"):/^https?:\/\//.test(t)?window.location.href=t:n.push(t))},affixOffsetTop:t.embedMode?0:50})},c.render=function(){var t,r=this.props,a=(r.router,r.match),c=r.location,l=(r.history,r.store),s=r.schema,u=(r.jumpTo,r.updateLocation,r.embedMode,(0,p.Z)(r,y)),f=s||e;return f.type||(f=(0,n.Z)({},f,{type:"page"})),t=(0,i.sYA)(f,(0,n.Z)({data:i.P6Y.createObject((0,n.Z)({},a.params,{amisStore:l,pathname:c.pathname,params:a.params}))},u,{fetcher:l.fetcher,notify:l.notify,alert:l.alert,copy:l.copy,propsTransform:undefined,theme:l.theme}),this.getEnv()),o.createElement(o.Fragment,null,t)},a}(o.Component),l.displayName="SchemaRenderer",l);return s=function(e,t,r,n){var o,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}([(0,a.f3)("store"),a.Pi],s),(0,c.EN)(s)}({type:"page",body:"It works"}),v=(0,a.f3)("store")((0,a.Pi)((function(e){var t,r,n=e.store,a=e.location,p=e.history;return o.createElement(i.Ar2,{aside:(t=n.pages.map((function(e){return{label:e.label,path:"/"+e.path,icon:e.icon}})),r=t.map((function(e){return e.path})),o.createElement(i.zot,{key:n.asideFolded?"folded-aside":"aside",navigations:[{label:"导航",children:t}],renderLink:function(e){var t=e.link,a=e.toggleExpand,c=e.classnames,s=e.depth;if(t.hidden)return null;var u=[];return t.children&&u.push(o.createElement("span",{key:"expand-toggle",className:c("AsideNav-itemArrow"),onClick:function(e){return a(t,e)}})),t.badge&&u.push(o.createElement("b",{key:"badge",className:c("AsideNav-itemBadge",t.badgeClassName||"bg-info")},t.badge)),t.icon?u.push(o.createElement("i",{key:"icon",className:c("AsideNav-itemIcon",t.icon)})):n.asideFolded&&1===s&&u.push(o.createElement("i",{key:"icon",className:c("AsideNav-itemIcon",t.children?"fa fa-folder":"fa fa-info")})),t.active||u.push(o.createElement("i",{key:"delete","data-tooltip":"删除","data-position":"bottom",className:"navbtn fa fa-times",onClick:function(e){e.preventDefault(),(0,i.iGu)("确认要删除").then((function(e){e&&n.removePageAt(r.indexOf(t.path))}))}})),u.push(o.createElement("i",{key:"edit","data-tooltip":"编辑","data-position":"bottom",className:"navbtn fa fa-pencil",onClick:function(e){e.preventDefault(),p.push("/edit/"+r.indexOf(t.path))}})),u.push(o.createElement("span",{key:"label",className:c("AsideNav-itemLabel")},t.label)),t.path?t.active?o.createElement("a",null,u):o.createElement(l.rU,{to:"/"===t.path[0]?t.path:""+t.path},u):o.createElement("a",{onClick:t.onClick?t.onClick:t.children?function(){return a(t)}:void 0},u)},isActive:function(e){return function(e,t){return!!(0,c.LX)(null==t?void 0:t.pathname,{path:e?e.replace(/\?.*$/,""):"",exact:!0,strict:!0})}(e.path&&"/"===e.path[0]?e.path:""+e.path,a)}})),header:o.createElement("div",null,o.createElement("div",{className:"cxd-Layout-headerBar"},o.createElement("div",{className:"hidden-xs p-t-sm ml-auto px-2"},o.createElement(i.zxk,{size:"sm",className:"m-r-xs",level:"success",disabled:!0},"全部导出"),o.createElement(i.zxk,{size:"sm",level:"info",onClick:function(){return n.setAddPageIsOpen(!0)}},"新增页面")))),folded:n.asideFolded,offScreen:n.offScreen},o.createElement(c.rs,null,n.pages.map((function(e){return o.createElement(c.AW,{key:e.id,path:"/"+e.path,render:function(){return o.createElement(h,{schema:e.schema})}})})),o.createElement(c.AW,{component:s})))})))},55798:function(e){var t=String.prototype.replace,r=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},80129:function(e,t,r){var n=r(58261),o=r(55235),a=r(55798);e.exports={formats:a,parse:o,stringify:n}},55235:function(e,t,r){var n=r(12769),o=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},i=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(n),c=i?n.slice(0,i.index):n,l=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;l.push(c)}for(var s=0;null!==(i=a.exec(n))&&s<r.depth;){if(s+=1,!r.plainObjects&&o.call(Object.prototype,i[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(i[1])}return i&&l.push("["+n.slice(i.index)+"]"),function(e,t,r){for(var n=t,o=e.length-1;o>=0;--o){var a,i=e[o];if("[]"===i&&r.parseArrays)a=[].concat(n);else{a=r.plainObjects?Object.create(null):{};var c="["===i.charAt(0)&&"]"===i.charAt(i.length-1)?i.slice(1,-1):i,l=parseInt(c,10);r.parseArrays||""!==c?!isNaN(l)&&i!==c&&String(l)===c&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[])[l]=n:"__proto__"!==c&&(a[c]=n):a={0:n}}n=a}return n}(l,t,r)}};e.exports=function(e,t){var r=t?n.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:a.delimiter,r.depth="number"==typeof r.depth?r.depth:a.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:a.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:a.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:a.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:a.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:a.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:a.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:a.strictNullHandling,""===e||null==e)return r.plainObjects?Object.create(null):{};for(var c="string"==typeof e?function(e,t){for(var r={},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,c=n.split(t.delimiter,i),l=0;l<c.length;++l){var s,p,u=c[l],f=u.indexOf("]="),d=-1===f?u.indexOf("="):f+1;-1===d?(s=t.decoder(u,a.decoder),p=t.strictNullHandling?null:""):(s=t.decoder(u.slice(0,d),a.decoder),p=t.decoder(u.slice(d+1),a.decoder)),o.call(r,s)?r[s]=[].concat(r[s]).concat(p):r[s]=p}return r}(e,r):e,l=r.plainObjects?Object.create(null):{},s=Object.keys(c),p=0;p<s.length;++p){var u=s[p],f=i(u,c[u],r);l=n.merge(l,f,r)}return n.compact(l)}},58261:function(e,t,r){var n=r(12769),o=r(55798),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,i(t)?t:[t])},s=Date.prototype.toISOString,p={delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},u=function e(t,r,o,a,c,s,u,f,d,m,y,h){var v=t;if("function"==typeof u?v=u(r,v):v instanceof Date&&(v=m(v)),null===v){if(a)return s&&!h?s(r,p.encoder):r;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||n.isBuffer(v))return s?[y(h?r:s(r,p.encoder))+"="+y(s(v,p.encoder))]:[y(r)+"="+y(String(v))];var b,g=[];if(void 0===v)return g;if(i(u))b=u;else{var j=Object.keys(v);b=f?j.sort(f):j}for(var O=0;O<b.length;++O){var k=b[O];c&&null===v[k]||(i(v)?l(g,e(v[k],o(r,k),o,a,c,s,u,f,d,m,y,h)):l(g,e(v[k],r+(d?"."+k:"["+k+"]"),o,a,c,s,u,f,d,m,y,h)))}return g};e.exports=function(e,t){var r=e,c=t?n.assign({},t):{};if(null!==c.encoder&&void 0!==c.encoder&&"function"!=typeof c.encoder)throw new TypeError("Encoder has to be a function.");var s=void 0===c.delimiter?p.delimiter:c.delimiter,f="boolean"==typeof c.strictNullHandling?c.strictNullHandling:p.strictNullHandling,d="boolean"==typeof c.skipNulls?c.skipNulls:p.skipNulls,m="boolean"==typeof c.encode?c.encode:p.encode,y="function"==typeof c.encoder?c.encoder:p.encoder,h="function"==typeof c.sort?c.sort:null,v=void 0!==c.allowDots&&c.allowDots,b="function"==typeof c.serializeDate?c.serializeDate:p.serializeDate,g="boolean"==typeof c.encodeValuesOnly?c.encodeValuesOnly:p.encodeValuesOnly;if(void 0===c.format)c.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,c.format))throw new TypeError("Unknown format option provided.");var j,O,k=o.formatters[c.format];"function"==typeof c.filter?r=(O=c.filter)("",r):i(c.filter)&&(j=O=c.filter);var w,A=[];if("object"!=typeof r||null===r)return"";w=c.arrayFormat in a?c.arrayFormat:"indices"in c?c.indices?"indices":"repeat":"indices";var x=a[w];j||(j=Object.keys(r)),h&&j.sort(h);for(var E=0;E<j.length;++E){var N=j[E];d&&null===r[N]||l(A,u(r[N],N,x,f,d,m?y:null,O,h,v,b,k,g))}var C=A.join(s),P=!0===c.addQueryPrefix?"?":"";return C.length>0?P+C:""}},12769:function(e){var t=Object.prototype.hasOwnProperty,r=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),n=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:n,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],i=Object.keys(a),c=0;c<i.length;++c){var l=i[c],s=a[l];"object"==typeof s&&null!==s&&-1===r.indexOf(s)&&(t.push({obj:a,prop:l}),r.push(s))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var n=[],o=0;o<t.length;++o)void 0!==t[o]&&n.push(t[o]);r.obj[r.prop]=n}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",o=0;o<t.length;++o){var a=t.charCodeAt(o);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?n+=t.charAt(o):a<128?n+=r[a]:a<2048?n+=r[192|a>>6]+r[128|63&a]:a<55296||a>=57344?n+=r[224|a>>12]+r[128|a>>6&63]+r[128|63&a]:(o+=1,a=65536+((1023&a)<<10|1023&t.charCodeAt(o)),n+=r[240|a>>18]+r[128|a>>12&63]+r[128|a>>6&63]+r[128|63&a])}return n},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(r,o,a){if(!o)return r;if("object"!=typeof o){if(Array.isArray(r))r.push(o);else{if(!r||"object"!=typeof r)return[r,o];(a&&(a.plainObjects||a.allowPrototypes)||!t.call(Object.prototype,o))&&(r[o]=!0)}return r}if(!r||"object"!=typeof r)return[r].concat(o);var i=r;return Array.isArray(r)&&!Array.isArray(o)&&(i=n(r,a)),Array.isArray(r)&&Array.isArray(o)?(o.forEach((function(n,o){if(t.call(r,o)){var i=r[o];i&&"object"==typeof i&&n&&"object"==typeof n?r[o]=e(i,n,a):r.push(n)}else r[o]=n})),r):Object.keys(o).reduce((function(r,n){var i=o[n];return t.call(r,n)?r[n]=e(r[n],i,a):r[n]=i,r}),i)}}}}]);